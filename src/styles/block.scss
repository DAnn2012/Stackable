/**
 * Core Block Styles
 */
@import "breakpoints";

// We need to set this to relative for making the whole block clickable.
.stk-block {
	position: relative;
	width: 100%;
}

// Containers
.stk-column,
.stk-block.stk-column {
	margin-top: 0;
	margin-bottom: 0;
}
// Mostly for border radius.
.stk-container {
	overflow: hidden;
}

// Hover transitions.
.stk-block,
.stk-container,
.stk-container-padding,
.stk-img-wrapper, // Images.
.stk-img-wrapper img, // Images.
.stk--has-background-overlay::before { // Image background overlays
	transition: all 0.12s cubic-bezier(0.45, 0.05, 0.55, 0.95);
	border-width: 1px;
	border-style: none;
}
.stk-block {
	will-change: transform, box-shadow, opacity, top, right, bottom, left, background, margin, padding, min-height, max-width;
}
.stk-container,
.stk-container-padding {
	will-change: transform, box-shadow, background, margin, padding, min-height, max-width;
}
.stk-img-wrapper img {
	will-change: filter;
}
// Some attributes will not animate if they have no starting values.
.stk-block,
.stk-container,
.stk-container-padding {
	min-height: 0;
	max-width: 100%;
}

/**
 * Resizeable rows and columns
 */
.stk-row {
	display: flex;
	flex-direction: row;
	flex-wrap: wrap;
}
.stk-column {
	flex: 1 1 0; // flex-basis 0 means that all columns will be equal.
	box-sizing: border-box;

	// Don't center the columns.
	margin-left: 0;
	margin-right: 0;

	// Make sure the contents occupy the entire area.
	display: flex;
	align-items: stretch;
}

// Column widths.
@include desktop-tablet {
	@for $i from 2 through 10 {
		.stk-row.stk-columns-#{ $i } {
			> .stk-column {
				flex: 1 1 #{ 100% / $i };
				max-width: #{ 100% / $i };
			}
		}
	}
}

// Columns can be collapsed for tablet and mobile only.
@include desktop {
	.stk-row {
		flex-wrap: nowrap;
	}
}
// Mobile auto-collapses all columns.
@include mobile {
	.stk-column {
		flex: 1 1 100%;
		max-width: 100%;
	}
}

// Block inner blocks.
.stk-block-content {
	width: 100%;
	position: relative;
	&:not(.stk-row) {
		// Make sure the inner blocks are top aligned.
		display: flex;
		flex-direction: column;
		justify-content: flex-start;
	}
}
.stk-inner-blocks {
	flex: 1;
	&:not(.stk-row) {
		// Make sure the inner blocks are top aligned.
		display: flex;
		flex-direction: column;
		justify-content: flex-start;

		// Inner block orientation.
		&:not(.stk--block-orientation-horizontal) {
			flex-direction: column;
		}
		&.stk--block-orientation-horizontal {
			flex-direction: row;
			> * {
				margin-top: 0;
				margin-bottom: 0;
			}
		}
	}

	// Ensure the contents don't have extra margins.
	> *:first-child {
		margin-top: 0;
	}
	> *:last-child {
		margin-bottom: 0;
	}
}
// Column with a block background has a padding that might not be obvious.
.stk-block-background {
	&.stk-column > .stk-block-content {
		margin: 0;
	}
}

// Images
.stk-image--fit {
	object-fit: cover;
	height: 100% !important;
	width: 100% !important;
}

// Block float alignment.
.stk-block.alignleft,
.stk-block.alignright {
	.stk-inner-blocks:first-of-type > .stk-block {
		max-width: 350px; // Give a default width for a floated block.
		width: auto;
	}
}

// Responsive hiding.
@include desktop {
	.stk--hide-desktop {
		display: none !important;
	}
}
@include tablet {
	.stk--hide-tablet {
		display: none !important;
	}
}
@include mobile {
	.stk--hide-mobile {
		display: none !important;
	}
}

// Typography Classes.
.stk--is-gradient {
	background-clip: text;
	-webkit-background-clip: text;
	-moz-background-clip: text;
	-o-background-clip: text;
	-webkit-text-fill-color: transparent;
	-moz-text-fill-color: transparent;
	-o-text-fill-color: transparent;
}

:where(.stk-block:hover) .stk--gradient-wrapper,
.stk--gradient-wrapper.stk--is-hovered,
.stk--gradient-wrapper .stk--is-hovered, {
	.stk--is-gradient:not(.stk--hover-gradient) {
		background-image: unset !important;
		background-clip: unset;
		-webkit-background-clip: unset;
		-moz-background-clip: unset;
		-o-background-clip: unset;
		-webkit-text-fill-color: unset;
		-moz-text-fill-color: unset;
		-o-text-fill-color: unset;
	}

	.stk--hover-gradient {
		background-clip: text;
		-webkit-background-clip: text;
		-moz-background-clip: text;
		-o-background-clip: text;
		-webkit-text-fill-color: transparent;
		-moz-text-fill-color: transparent;
		-o-text-fill-color: transparent;
	}
}

// Button.
.stk-button {
	.stk-button__svg-wrapper {
		position: relative;

		& > .stk--shape-icon {
			position: absolute;
			z-index: 1;
			margin: auto;
			top: 0;
			left: 0;
			right: 0;
			bottom: 0;
		}
	}

	.stk-button__inner-svg {
		display: flex;
		position: relative;
		z-index: 2;

		& > svg:last-child {
			height: 1em;
			width: 1em;
		}
	}

	a.stk-button__button {
		display: flex;
		justify-content: center;
		align-items: center;
		column-gap: 4px;
	}
}
